webpackJsonp([1],{"/j3h":function(e,t){},"9OvL":function(e,t){e.exports={API_KEY:"f3a8d39c0fmsh5c0205d6a92bce2p1831e5jsnf65d46c9b0e3"}},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("7+uW"),r=n("0Qa9"),s=n.n(r),i=n("Xxa5"),c=n.n(i),l=n("Gu7T"),a=n.n(l),d=n("fZjL"),u=n.n(d),h=n("exGp"),x=n.n(h),p=n("lHA8"),f=n.n(p),v=n("mtWM"),b=n.n(v),m=(n("162o"),{props:["showBox","boxY","boxX","boxText","suggestions"],data:function(){return{wordInput:""}},methods:{handleReplace:function(){this.$emit("replace",this.wordInput)},fixWord:function(e){console.log(e),this.$emit("fixword",e)},ignoreWord:function(e){this.$emit("ignore",e)},fixAll:function(e){console.log(e),this.$emit("fixall",e)},overBox:function(){this.$emit("overbox",!0)},resetBox:function(){this.$emit("resetbox")}}}),g={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.showBox,expression:"showBox"}],staticClass:"box",style:{top:e.boxY+"px",left:e.boxX+"px"},attrs:{id:"box"},on:{mouseover:e.overBox,mouseleave:e.resetBox}},[n("p",[n("strike",[e._v(e._s(e.boxText))]),e._v(" "),n("span",{staticClass:"arrow"},[e._v("â†’")])],1),e._v(" "),e._l(e.suggestions,function(t){return n("div",{key:"div_"+t},[n("label",[e._v(e._s(t)+":")]),e._v(" "),n("button",{staticClass:"spellcheck-modal-btn",on:{click:function(n){return e.fixWord(t)}}},[e._v(" Replace ")]),e._v(" "),n("button",{staticClass:"spellcheck-modal-btn",on:{click:function(n){return e.fixAll(t)}}},[e._v(" Replace All ")])])}),e._v(" "),n("br"),e._v(" "),n("div",{staticClass:"spellcheck-modal-btn ignore",on:{click:function(t){return e.ignoreWord(e.boxText)}}},[e._v("Ignore Word")]),e._v(" "),n("br"),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.wordInput,expression:"wordInput"}],staticClass:"spellcheck-modal-btn",attrs:{type:"text",placeholder:"Enter replacement"},domProps:{value:e.wordInput},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleReplace(t)},input:function(t){t.target.composing||(e.wordInput=t.target.value)}}})],2)},staticRenderFns:[]};var k=n("VU/8")(m,g,!1,function(e){n("/j3h")},null,null).exports,y=n("9OvL"),w=n.n(y),T={name:"Spellchecker",components:{SuggestionPopup:k},props:["spellcheckText"],created:function(){this.text=this.spellcheckText},updated:function(){this.isChecking||this.text===this.spellcheckText||(console.log("done checking and text doesnt equal spellcheckText"),this.text=this.spellcheckText)},data:function(){return{text:"",showbox:!1,boxY:0,boxX:0,boxText:"",selectedEl:null,editorKey:"editor_start",overBox:!1,corrections:[],ignoreList:new f.a,isChecking:!1,lastIndex:null,json:w.a}},methods:{mounted:function(){document.body.addEventListener("keyup",this.handleTab)},created:function(){(new FileReader).readAsText()},destroyed:function(){document.body.removeEventListener("keyup",this.handleTab)},onDivInput:function(e){this.isChecking||(this.text=e.target.textContent,this.$emit("donechecking",this.text))},spellcheck:function(){var e=this;return x()(c.a.mark(function t(){var n,o,r,s,i;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isChecking=!e.isChecking,n=e.sanitize(),e.isChecking){t.next=8;break}return e.resetBox(),e.text=n,e.corrections={},e.$emit("donechecking",e.text),t.abrupt("return");case 8:return o=encodeURIComponent(n),t.next=11,b.a.get("https://montanaflynn-spellcheck.p.rapidapi.com/check/?text="+o,{headers:{"X-RapidAPI-Key":w.a.API_KEY}});case 11:if(r=t.sent,s=r.data.corrections){t.next=15;break}return t.abrupt("return");case 15:i=u()(s),e.corrections=s,i=(i=i.concat([].concat(a()(e.ignoreList)))).filter(function(t){var n=i.indexOf(t)===i.lastIndexOf(t);return n||delete e.corrections[t],n}),console.log(e.corrections),i.forEach(function(t){e.corrections[t]&&e.corrections[t].length>3&&e.corrections[t].splice(3,e.corrections[t].length);var o=new RegExp("\\b"+t+"\\b","gm");n.match(o);n=n.replace(o,function(e,n,o){var r='<span style="border-bottom: 2px solid blue;" data-word="'+t+'">'+t+"</span>";return"-"===o.charAt(n-1)||"-"===o.charAt(n+e.length)?t:r}),e.text=n}),e.editorKey="editor_"+(new Date).getTime(),document.getElementById("spellcheck").focus();case 23:case"end":return t.stop()}},t,e)}))()},sanitize:function(){var e=document.getElementById("editor");return e.innerHTML=e.innerHTML.replace(/<(?:.|\n)*?>/gm,""),e.textContent},handleChange:function(){var e=document.getElementById("editor").textContent;console.log("input"),this.$emit("spellcheckText",e)},handleReplace:function(e){this.fixWord(e),this.replaceWord=""},handleMouseOver:function(e){var t=e.target;this.overBox||this.selectedEl===t||this.resetBox();var n=e.target.getAttribute("data-word");n&&(this.showbox=!0,this.selectedEl=e.target,this.selectedEl.style.backgroundColor="lightblue",this.selectedEl.setAttribute("data-status","active"),this.boxY=e.target.offsetTop+18,this.boxX=e.target.offsetLeft-5,this.boxText=n)},handleMouseLeave:function(e){var t=e.target;!this.overBox&&this.showbox&&this.selectedEl!==t&&this.resetBox()},handleTab:function(e){if(9===e.keyCode&&this.isChecking){document.getElementById("spellcheck").focus();var t=document.querySelectorAll("[data-word]");t.length&&(null===this.lastIndex||this.lastIndex+1>=t.length?this.lastIndex=0:this.lastIndex=this.lastIndex+1,Array.prototype.forEach.call(t,function(e){return e.style.backgroundColor=""}),this.handleMouseOver({target:t[this.lastIndex]}))}},fixWord:function(e){var t=document.createTextNode(e);document.getElementById("editor").replaceChild(t,this.selectedEl),this.text=document.getElementById("editor").innerHTML,this.resetBox()},ignoreWord:function(e){var t=document.querySelectorAll('[data-word="'+e+'"]');Array.prototype.forEach.call(t,function(e){e.removeAttribute("data-word"),e.style.borderBottom=""}),this.text=document.getElementById("editor").innerHTML,delete this.corrections[e],this.ignoreList.add(e),this.resetBox()},fixAll:function(e){var t=document.querySelectorAll('span[data-word="'+this.boxText+'"]');Array.prototype.forEach.call(t,function(t,n){var o=document.createTextNode(e);t.parentNode.replaceChild(o,t)}),this.text=document.getElementById("editor").innerHTML,this.resetBox()},resetBox:function(){this.showbox=!1,this.overBox=!1,this.boxY=0,this.boxX=0,this.boxText="",this.selectedEl&&(this.selectedEl.style.backgroundColor="",this.selectedEl.removeAttribute("data-status"),this.selectedEl=null)}}},_={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrapper",on:{mouseover:e.handleMouseOver,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.handleTab(t)}}},[n("SuggestionPopup",{attrs:{showBox:e.showbox,boxY:e.boxY,boxX:e.boxX,boxText:e.boxText,suggestions:e.corrections&&e.corrections[e.boxText]},on:{overbox:function(t){e.overBox=!0},resetbox:e.resetBox,fixword:e.fixWord,fixall:e.fixAll,replace:e.handleReplace,ignore:e.ignoreWord}}),e._v(" "),n("div",{key:e.editorKey,class:{noselect:e.isChecking},attrs:{tabindex:e.isChecking?4:0,id:"editor",contenteditable:!e.isChecking,spellcheck:"false"},domProps:{innerHTML:e._s(e.text)},on:{focusout:function(t){return e.onDivInput(t)}}}),e._v(" "),n("br"),e._v(" "),n("button",{attrs:{tabindex:"5",id:"spellcheck"},on:{click:e.spellcheck}},[e._v(e._s(e.isChecking?"Done":"Spellcheck"))])],1)},staticRenderFns:[]};var E={name:"App",components:{Spellchecker:n("VU/8")(T,_,!1,function(e){n("ZlF7")},"data-v-ca835fe4",null).exports},data:function(){return{spellcheckText:"something to start wth"}},methods:{updateText:function(e){this.spellcheckText=e}}},C={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("Spellchecker",{attrs:{spellcheckText:this.spellcheckText},on:{donechecking:this.updateText}})],1)},staticRenderFns:[]};var B=n("VU/8")(E,C,!1,function(e){n("rr+1")},null,null).exports;window.Promise=s.a,o.a.config.productionTip=!1,new o.a({el:"#app",components:{App:B},template:"<App/>"})},ZlF7:function(e,t){},"rr+1":function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.64cc6290c16c2e98dcc4.js.map